<!DOCTYPE html>
<html>
    <head>

        <style>
            body, html {
                overflow-x: hidden;
                overflow-y: hidden;
            }

            body {
                margin: 0;
            }

            canvas {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <a href="https://github.com/InventivetalentDev/MineRender/blob/master/test/model.html" target="_blank" style="position: absolute;"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_gray_6d6d6d.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/94/three.min.js" integrity="sha256-NGC9JEuTWN4GhTj091wctgjzftr+8WNDmw0H8J5YPYE=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/InventivetalentDev/MineRender@1.1.1/dist/model.js"></script>
        <script>
            (function () {
                let fence = [
                    {
                        model: "block/birch_fence_post",
                        offset: [0, 0, 0]
                    },
                    {
                        model: "block/birch_fence_side",
                        offset: [0, 0, -3]
                    },
                    {
                        model: "block/birch_fence_post",
                        offset: [0, 0, -13]
                    }
                ];

                window.modelRender = new ModelRender({
                    // showAxes: true,
                    // showGrid: false,
                    // showOutlines: true,
                    centerCubes: true,
                    camera: {
                        type: "perspective",
                        x: 20,
                        y: 15,
                        z: 20,
                        target: [0, 0, 0]
                    }
                    // assetRoot: "/res/rp/bdcraft512"
                });

                let multiBlock = [{"blockstate": "purpur_block", "offset": [16, 0, 16]}, {"blockstate": "purpur_block", "offset": [32, 0, 16]}, {"blockstate": "purpur_block", "offset": [48, 0, 16]}, {"blockstate": "purpur_block", "offset": [64, 0, 16]}, {"blockstate": "purpur_block", "offset": [80, 0, 16]}, {"blockstate": "purpur_block", "offset": [96, 0, 16]}, {
                    "blockstate": "purpur_block",
                    "offset": [112, 0, 16]
                }, {"blockstate": "purpur_block", "offset": [128, 0, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 16, 16]}, {"blockstate": "end_bricks", "offset": [32, 16, 16]}, {"blockstate": "end_bricks", "offset": [48, 16, 16]}, {"blockstate": "end_bricks", "offset": [64, 16, 16]}, {"blockstate": "end_bricks", "offset": [80, 16, 16]}, {
                    "blockstate": "end_bricks",
                    "offset": [96, 16, 16]
                }, {"blockstate": "end_bricks", "offset": [112, 16, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 16, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 32, 16]}, {"blockstate": "end_bricks", "offset": [32, 32, 16]}, {"blockstate": "end_bricks", "offset": [64, 32, 16]}, {
                    "blockstate": "end_bricks",
                    "offset": [80, 32, 16]
                }, {"blockstate": "end_bricks", "offset": [112, 32, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 32, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 48, 16]}, {"blockstate": "end_bricks", "offset": [32, 48, 16]}, {"blockstate": "end_bricks", "offset": [64, 48, 16]}, {
                    "blockstate": "end_bricks",
                    "offset": [80, 48, 16]
                }, {"blockstate": "end_bricks", "offset": [112, 48, 16]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 48, 16]}, {"blockstate": "purpur_block", "offset": [16, 0, 32]}, {"blockstate": "purpur_block", "offset": [32, 0, 32]}, {"blockstate": "purpur_block", "offset": [48, 0, 32]}, {
                    "blockstate": "purpur_block",
                    "offset": [64, 0, 32]
                }, {"blockstate": "purpur_block", "offset": [80, 0, 32]}, {"blockstate": "purpur_block", "offset": [96, 0, 32]}, {"blockstate": "purpur_block", "offset": [112, 0, 32]}, {"blockstate": "purpur_block", "offset": [128, 0, 32]}, {"blockstate": "end_bricks", "offset": [16, 16, 32]}, {"blockstate": "end_bricks", "offset": [128, 16, 32]}, {
                    "blockstate": "end_bricks",
                    "offset": [16, 32, 32]
                }, {"blockstate": "end_bricks", "offset": [128, 32, 32]}, {"blockstate": "end_bricks", "offset": [16, 48, 32]}, {"blockstate": "end_bricks", "offset": [128, 48, 32]}, {"blockstate": "purpur_block", "offset": [16, 0, 48]}, {"blockstate": "purpur_block", "offset": [32, 0, 48]}, {"blockstate": "purpur_block", "offset": [48, 0, 48]}, {
                    "blockstate": "purpur_block",
                    "offset": [64, 0, 48]
                }, {"blockstate": "purpur_block", "offset": [80, 0, 48]}, {"blockstate": "purpur_block", "offset": [96, 0, 48]}, {"blockstate": "purpur_block", "offset": [112, 0, 48]}, {"blockstate": "purpur_block", "offset": [128, 0, 48]}, {"blockstate": "end_bricks", "offset": [16, 16, 48]}, {"blockstate": "end_bricks", "offset": [128, 16, 48]}, {
                    "blockstate": "purpur_block",
                    "offset": [16, 0, 64]
                }, {"blockstate": "purpur_block", "offset": [32, 0, 64]}, {"blockstate": "purpur_block", "offset": [48, 0, 64]}, {"blockstate": "purpur_block", "offset": [64, 0, 64]}, {"blockstate": "purpur_block", "offset": [80, 0, 64]}, {"blockstate": "purpur_block", "offset": [96, 0, 64]}, {"blockstate": "purpur_block", "offset": [112, 0, 64]}, {
                    "blockstate": "purpur_block",
                    "offset": [128, 0, 64]
                }, {"blockstate": "end_bricks", "offset": [16, 16, 64]}, {"blockstate": "end_bricks", "offset": [128, 16, 64]}, {"blockstate": "end_bricks", "offset": [16, 32, 64]}, {"blockstate": "end_bricks", "offset": [128, 32, 64]}, {"blockstate": "end_bricks", "offset": [16, 48, 64]}, {"blockstate": "end_bricks", "offset": [128, 48, 64]}, {
                    "blockstate": "purpur_block",
                    "offset": [16, 0, 80]
                }, {"blockstate": "purpur_block", "offset": [32, 0, 80]}, {"blockstate": "purpur_block", "offset": [48, 0, 80]}, {"blockstate": "purpur_block", "offset": [64, 0, 80]}, {"blockstate": "purpur_block", "offset": [80, 0, 80]}, {"blockstate": "purpur_block", "offset": [96, 0, 80]}, {"blockstate": "purpur_block", "offset": [112, 0, 80]}, {
                    "blockstate": "purpur_block",
                    "offset": [128, 0, 80]
                }, {"blockstate": "end_bricks", "offset": [16, 16, 80]}, {"blockstate": "end_bricks", "offset": [128, 16, 80]}, {"blockstate": "end_bricks", "offset": [16, 32, 80]}, {"blockstate": "end_bricks", "offset": [128, 32, 80]}, {"blockstate": "end_bricks", "offset": [16, 48, 80]}, {"blockstate": "end_bricks", "offset": [128, 48, 80]}, {
                    "blockstate": "purpur_block",
                    "offset": [16, 0, 96]
                }, {"blockstate": "purpur_block", "offset": [32, 0, 96]}, {"blockstate": "purpur_block", "offset": [48, 0, 96]}, {"blockstate": "purpur_block", "offset": [64, 0, 96]}, {"blockstate": "purpur_block", "offset": [80, 0, 96]}, {"blockstate": "purpur_block", "offset": [96, 0, 96]}, {"blockstate": "purpur_block", "offset": [112, 0, 96]}, {
                    "blockstate": "purpur_block",
                    "offset": [128, 0, 96]
                }, {"blockstate": "end_bricks", "offset": [16, 16, 96]}, {"blockstate": "end_bricks", "offset": [128, 16, 96]}, {"blockstate": "purpur_block", "offset": [16, 0, 112]}, {"blockstate": "purpur_block", "offset": [32, 0, 112]}, {"blockstate": "purpur_block", "offset": [48, 0, 112]}, {"blockstate": "purpur_block", "offset": [64, 0, 112]}, {
                    "blockstate": "purpur_block",
                    "offset": [80, 0, 112]
                }, {"blockstate": "purpur_block", "offset": [96, 0, 112]}, {"blockstate": "purpur_block", "offset": [112, 0, 112]}, {"blockstate": "purpur_block", "offset": [128, 0, 112]}, {"blockstate": "end_bricks", "offset": [16, 16, 112]}, {"blockstate": "end_bricks", "offset": [128, 16, 112]}, {"blockstate": "end_bricks", "offset": [16, 32, 112]}, {
                    "blockstate": "end_bricks",
                    "offset": [128, 32, 112]
                }, {"blockstate": "end_bricks", "offset": [16, 48, 112]}, {"blockstate": "end_bricks", "offset": [128, 48, 112]}, {"blockstate": "purpur_block", "offset": [16, 0, 128]}, {"blockstate": "purpur_block", "offset": [32, 0, 128]}, {"blockstate": "purpur_block", "offset": [48, 0, 128]}, {"blockstate": "purpur_block", "offset": [64, 0, 128]}, {
                    "blockstate": "purpur_block",
                    "offset": [80, 0, 128]
                }, {"blockstate": "purpur_block", "offset": [96, 0, 128]}, {"blockstate": "purpur_block", "offset": [112, 0, 128]}, {"blockstate": "purpur_block", "offset": [128, 0, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 16, 128]}, {"blockstate": "end_bricks", "offset": [32, 16, 128]}, {
                    "blockstate": "end_bricks",
                    "offset": [48, 16, 128]
                }, {"blockstate": "end_bricks", "offset": [96, 16, 128]}, {"blockstate": "end_bricks", "offset": [112, 16, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 16, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 32, 128]}, {"blockstate": "end_bricks", "offset": [32, 32, 128]}, {
                    "blockstate": "end_bricks",
                    "offset": [48, 32, 128]
                }, {"blockstate": "end_bricks", "offset": [96, 32, 128]}, {"blockstate": "end_bricks", "offset": [112, 32, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 32, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [16, 48, 128]}, {"blockstate": "end_bricks", "offset": [32, 48, 128]}, {
                    "blockstate": "end_bricks",
                    "offset": [48, 48, 128]
                }, {"blockstate": "end_bricks", "offset": [96, 48, 128]}, {"blockstate": "end_bricks", "offset": [112, 48, 128]}, {"blockstate": "purpur_pillar", "variant": "axis=y", "offset": [128, 48, 128]}, {"blockstate": "purpur_block", "offset": [48, 0, 144]}, {"blockstate": "purpur_block", "offset": [64, 0, 144]}, {
                    "blockstate": "purpur_block",
                    "offset": [80, 0, 144]
                }, {"blockstate": "purpur_block", "offset": [96, 0, 144]}, {"blockstate": "structure_block", "variant": "mode=save", "offset": [48, 32, 144]}, {"blockstate": "structure_block", "variant": "mode=save", "offset": [96, 32, 144]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [48, 32, 16]}, {
                    "blockstate": "magenta_stained_glass",
                    "variant": "normal",
                    "offset": [96, 32, 16]
                }, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [48, 48, 16]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [96, 48, 16]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [16, 32, 48]}, {
                    "blockstate": "magenta_stained_glass",
                    "variant": "normal",
                    "offset": [128, 32, 48]
                }, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [16, 48, 48]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [128, 48, 48]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [16, 32, 96]}, {
                    "blockstate": "magenta_stained_glass",
                    "variant": "normal",
                    "offset": [128, 32, 96]
                }, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [16, 48, 96]}, {"blockstate": "magenta_stained_glass", "variant": "normal", "offset": [128, 48, 96]}, {"blockstate": "purpur_stairs", "variant": "facing=north,half=bottom,shape=straight", "offset": [32, 0, 144]}, {
                    "blockstate": "purpur_stairs",
                    "variant": "facing=north,half=bottom,shape=straight",
                    "offset": [112, 0, 144]
                }]


                window.modelRender.render([{
                    blockstate: (location.hash.substr(1) || "stone")
                }], function () {
                    setTimeout(function () {
                        console.log(window.modelRender.toImage(false));
                    }, 1000);
                });

                // window.modelRender.render([{
                //     model: "block/purpur_stairs",
                //     rotation: [0, 180, 0],
                //     offset: [16, 0, 16]
                // }], function () {
                //
                // });

                // let cancel = false;
                // document.body.addEventListener("modelRender", function () {
                //     if (cancel) {
                //         console.log("cancel!")
                //         cancelAnimationFrame(window.modelRender._animId);
                //     } else if (window.modelRender.models.length > 0) {
                //         console.log("should cancel")
                //         cancel = true;
                //     }
                // })
            })();
        </script>
    </body>
</html>
